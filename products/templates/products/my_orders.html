{% extends 'products/base.html' %}
{% block title %}My Orders - EchoStore{% endblock %}

{% block content %}
<style>
    .orders-table {
        margin-top: 40px;
    }

    .orders-title {
        font-weight: 700;
        font-size: 26px;
        color: #6a0dad;
        margin-top: 30px;
        text-align: center;
    }

    .table th {
        background-color: #6C3483;
        color: white;
    }

    .table-striped > tbody > tr:nth-of-type(odd) {
        background-color: #f9f2fc;
    }

    .no-orders {
        color: #888;
        text-align: center;
        margin-top: 40px;
    }
</style>

<h2 class="orders-title">üõçÔ∏è Your Order History</h2>

{% if orders %}
    <div class="table-responsive orders-table">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Order Total</th>
                    <th>Date Ordered</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                    {% for item in order.orderitem_set.all %}
                        <tr>
                            <td>#{{ order.id }}</td>
                            <td>{{ item.product.name }}</td>
                            <td>{{ item.quantity }}</td>
                            <td>Ksh {{ item.price|floatformat:0 }}</td>
                            <td>Ksh {{ order.total_price|floatformat:0 }}</td>
                            <td>{{ order.created_at|date:"M d, Y H:i" }}</td>
                        </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <p class="no-orders">üòî You haven‚Äôt placed any orders yet.</p>
{% endif %}
{% endblock %}
